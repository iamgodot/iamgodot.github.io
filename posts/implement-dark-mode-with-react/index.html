<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Implement Dark Mode With React | Godot's Blog</title>
<meta name=keywords content="frontend"><meta name=description content="Being able to toggle between light and dark mode has always been a fancy feature in my mind when it comes to the UI part of an app. Recently I&rsquo;ve done it myself and found it actually quite straightforward to implement.
Rationale Aside from any frameworks, let&rsquo;s think about how color mode switch should work. Apparently we need 2 sets of colors defined with CSS, as well as an easy way to change between them for our HTML elements."><meta name=author content><link rel=canonical href=https://iamgodot.com/posts/implement-dark-mode-with-react/><link crossorigin=anonymous href=/assets/css/stylesheet.701344b8d1193e5466c2513d70a32e52b3935828a2c6707abaf1ec33a7deda86.css integrity="sha256-cBNEuNEZPlRmwlE9cKMuUrOTWCiixnB6uvHsM6fe2oY=" rel="preload stylesheet" as=style><link rel=icon href=https://iamgodot.com/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://iamgodot.com/icons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://iamgodot.com/icons/favicon-32x32.png><link rel=apple-touch-icon href=https://iamgodot.com/icons/apple-touch-icon.png><link rel=mask-icon href=https://iamgodot.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://iamgodot.com/posts/implement-dark-mode-with-react/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lxgw-wenkai-webfont@1.7.0/style.css><script defer src=https://us.umami.is/script.js data-website-id=9000d82d-f063-4632-aa6a-a33e85bf4234></script><meta property="og:title" content="Implement Dark Mode With React"><meta property="og:description" content="Being able to toggle between light and dark mode has always been a fancy feature in my mind when it comes to the UI part of an app. Recently I&rsquo;ve done it myself and found it actually quite straightforward to implement.
Rationale Aside from any frameworks, let&rsquo;s think about how color mode switch should work. Apparently we need 2 sets of colors defined with CSS, as well as an easy way to change between them for our HTML elements."><meta property="og:type" content="article"><meta property="og:url" content="https://iamgodot.com/posts/implement-dark-mode-with-react/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-05-03T11:10:08-07:00"><meta property="article:modified_time" content="2024-05-03T11:10:08-07:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Implement Dark Mode With React"><meta name=twitter:description content="Being able to toggle between light and dark mode has always been a fancy feature in my mind when it comes to the UI part of an app. Recently I&rsquo;ve done it myself and found it actually quite straightforward to implement.
Rationale Aside from any frameworks, let&rsquo;s think about how color mode switch should work. Apparently we need 2 sets of colors defined with CSS, as well as an easy way to change between them for our HTML elements."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://iamgodot.com/posts/"},{"@type":"ListItem","position":2,"name":"Implement Dark Mode With React","item":"https://iamgodot.com/posts/implement-dark-mode-with-react/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Implement Dark Mode With React","name":"Implement Dark Mode With React","description":"Being able to toggle between light and dark mode has always been a fancy feature in my mind when it comes to the UI part of an app. Recently I\u0026rsquo;ve done it myself and found it actually quite straightforward to implement.\nRationale Aside from any frameworks, let\u0026rsquo;s think about how color mode switch should work. Apparently we need 2 sets of colors defined with CSS, as well as an easy way to change between them for our HTML elements.","keywords":["frontend"],"articleBody":"Being able to toggle between light and dark mode has always been a fancy feature in my mind when it comes to the UI part of an app. Recently I’ve done it myself and found it actually quite straightforward to implement.\nRationale Aside from any frameworks, let’s think about how color mode switch should work. Apparently we need 2 sets of colors defined with CSS, as well as an easy way to change between them for our HTML elements.\nTo conveniently reuse pre-defined colors, we can certainly leverage on CSS variables:\n:root { --background-color: white; --text-color: black; } [data-theme=\"dark\"] { --background-color: black; --text-color: white; } div { background-color: var(--background-color); } .title { color: var(--text-color); } With the above setup, it becomes effortless to select either of the 2 color sets. Remeber the variable names must begin with two dashes to be used by the var() function.\nNoticeably I also use the attribute selector in CSS to define the colors for dark mode, which is for HTML elements to pick up with a custom data attribute. The data-* format is according to naming recommendations, not mandatory.\nThe last piece is just a simple toggler. With vanilla JS we only have to manipulate the data-theme attribute on the target HTML elements. Of course in React it could take a state variable instead.\nNow we have all the foundamental knowledge to implement dark mode.\nRemeber the choice Sometimes, users want to keep their choice of dark mode, even after closing the window or browser. In order to achieve this, we can store this info in LocalStorage.\nSimply put, the Web Storage API provides us with 2 ways of saving key/value pairs. Compared with sessionStorage, localStorage persists data even when the browser is closed and reopened.\nThere’s a NPM package called use-local-storage if you want to save the hassle. Essentially it offers a thin layer of abstraction of the original API, which makes serialization a bit easier as well.\nFollow system perference Some users would like the app to follow their theme settings of the operating system, which might be light, dark or automatic following time of the day.\nFor this, we’re going to use CSS media queries, which allow us to get the device’s media type or other configs. In JS there’s an API to get such media info:\n// Here isDarkMode would be either true or false const isDarkMode = window.matchMedia(\"(perfers-color-scheme: dark)\").matches; Furthermore, if you need to test it out, Chrome offers a simulating setting in the Rendering tab.\nWith frameworks TailwindCSS is undoubtedly powerful CSS framework and one of my favorite. It provides a very simple way to customize colors for dark mode:\n\u003cdiv class=\"bg-white dark:bg-slate-800\"\u003e \u003cp class=\"text-slate-900 dark:text-white\"\u003eHello world!\u003c/p\u003e \u003c/div\u003e Besides, I also love using Shadcn/ui for delicate UI components. It offers copy-and-paste code for things to work out-of-the-box, such as this tutorial for adding dark mode to a vite app.\nBy default, Shadcn/ui uses a basic white/black color scheme, which is very similar to what Vercel looks like. However, it’s fairly easy to customize as well, with either TailwindCSS or CSS variables. And that gives the chance to decorate for both light and dark mode.\nIt has pre-defined CSS variables for the colors of its various components, such as --background or --primary. You can also add new colors as new variables. HSL colors are supported as well as hex and RGB, making it extremely handy to forge all the details to be exactly how you want them to be.\nA little demo In case you want to take a look, here’s a simple form with a mode toggle button that I built in CodeSandbox:\nReferences\nReact Dark Mode Toggle/Theme - Complete Guide HTML custom data attributes Using media queries Rendering tab in Chrome Dark mode with TailwindCSS Theming with Shadcn/ui ","wordCount":"631","inLanguage":"en","datePublished":"2024-05-03T11:10:08-07:00","dateModified":"2024-05-03T11:10:08-07:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://iamgodot.com/posts/implement-dark-mode-with-react/"},"publisher":{"@type":"Organization","name":"Godot's Blog","logo":{"@type":"ImageObject","url":"https://iamgodot.com/icons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://iamgodot.com/ accesskey=h title="Godot's Blog (Alt + H)">Godot's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Implement Dark Mode With React</h1><div class=post-meta><span title='2024-05-03 11:10:08 -0700 -0700'>05-03</span>&nbsp;·&nbsp;3 min</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#rationale aria-label=Rationale>Rationale</a></li><li><a href=#remeber-the-choice aria-label="Remeber the choice">Remeber the choice</a></li><li><a href=#follow-system-perference aria-label="Follow system perference">Follow system perference</a></li><li><a href=#with-frameworks aria-label="With frameworks">With frameworks</a></li><li><a href=#a-little-demo aria-label="A little demo">A little demo</a></li></ul></div></details></div><div class=post-content><p>Being able to toggle between light and dark mode has always been a fancy feature in my mind when it comes to the UI part of an app. Recently I&rsquo;ve done it myself and found it actually quite straightforward to implement.</p><h1 id=rationale>Rationale<a hidden class=anchor aria-hidden=true href=#rationale>#</a></h1><p>Aside from any frameworks, let&rsquo;s think about how color mode switch should work. Apparently we need 2 sets of colors defined with CSS, as well as an easy way to change between them for our HTML elements.</p><p>To conveniently reuse pre-defined colors, we can certainly leverage on <a href=https://www.w3schools.com/css/css3_variables.asp>CSS variables</a>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-CSS data-lang=CSS><span style=display:flex><span>:<span style=color:#a6e22e>root</span> {
</span></span><span style=display:flex><span>  --background-color: <span style=color:#66d9ef>white</span>;
</span></span><span style=display:flex><span>  --text-color: <span style=color:#66d9ef>black</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span><span style=color:#f92672>data-theme</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;dark&#34;</span><span style=color:#f92672>]</span> {
</span></span><span style=display:flex><span>  --background-color: <span style=color:#66d9ef>black</span>;
</span></span><span style=display:flex><span>  --text-color: <span style=color:#66d9ef>white</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>div</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>background-color</span>: <span style=color:#a6e22e>var</span>(<span style=color:#f92672>--</span>background<span style=color:#f92672>-</span><span style=color:#66d9ef>color</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>title</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>color</span>: <span style=color:#a6e22e>var</span>(<span style=color:#f92672>--</span><span style=color:#66d9ef>text</span><span style=color:#f92672>-</span><span style=color:#66d9ef>color</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>With the above setup, it becomes effortless to select either of the 2 color sets. Remeber the variable names must begin with two dashes to be used by the <code>var()</code> function.</p><p>Noticeably I also use the attribute selector in CSS to define the colors for dark mode, which is for HTML elements to pick up with a custom data attribute. The <code>data-*</code> format is according to naming recommendations, not mandatory.</p><p>The last piece is just a simple toggler. With vanilla JS we only have to manipulate the <code>data-theme</code> attribute on the target HTML elements. Of course in React it could take a state variable instead.</p><p>Now we have all the foundamental knowledge to implement dark mode.</p><h1 id=remeber-the-choice>Remeber the choice<a hidden class=anchor aria-hidden=true href=#remeber-the-choice>#</a></h1><p>Sometimes, users want to keep their choice of dark mode, even after closing the window or browser. In order to achieve this, we can store this info in <code>LocalStorage</code>.</p><p>Simply put, the <a href=https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API>Web Storage API</a> provides us with 2 ways of saving key/value pairs. Compared with <code>sessionStorage</code>, <code>localStorage</code> persists data even when the browser is closed and reopened.</p><p>There&rsquo;s a NPM package called <a href=https://www.npmjs.com/package/use-local-storage>use-local-storage</a> if you want to save the hassle. Essentially it offers a thin layer of abstraction of the original API, which makes serialization a bit easier as well.</p><h1 id=follow-system-perference>Follow system perference<a hidden class=anchor aria-hidden=true href=#follow-system-perference>#</a></h1><p>Some users would like the app to follow their theme settings of the operating system, which might be light, dark or automatic following time of the day.</p><p>For this, we&rsquo;re going to use CSS media queries, which allow us to get the device&rsquo;s media type or other configs. In JS there&rsquo;s an API to get such media info:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// Here isDarkMode would be either true or false
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>isDarkMode</span> <span style=color:#f92672>=</span> window.<span style=color:#a6e22e>matchMedia</span>(<span style=color:#e6db74>&#34;(perfers-color-scheme: dark)&#34;</span>).<span style=color:#a6e22e>matches</span>;
</span></span></code></pre></div><p>Furthermore, if you need to test it out, Chrome offers a simulating setting in the Rendering tab.</p><h1 id=with-frameworks>With frameworks<a hidden class=anchor aria-hidden=true href=#with-frameworks>#</a></h1><p>TailwindCSS is undoubtedly powerful CSS framework and one of my favorite. It provides a very simple way to customize colors for dark mode:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-HTML data-lang=HTML><span style=display:flex><span>&lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;bg-white dark:bg-slate-800&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>p</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text-slate-900 dark:text-white&#34;</span>&gt;Hello world!&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>div</span>&gt;
</span></span></code></pre></div><p>Besides, I also love using Shadcn/ui for delicate UI components. It offers copy-and-paste code for things to work out-of-the-box, such as <a href=https://ui.shadcn.com/docs/dark-mode/vite>this tutorial</a> for adding dark mode to a vite app.</p><p>By default, Shadcn/ui uses a basic white/black color scheme, which is very similar to what Vercel looks like. However, it&rsquo;s fairly easy to customize as well, with either TailwindCSS or CSS variables. And that gives the chance to decorate for both light and dark mode.</p><p>It has pre-defined CSS variables for the colors of its various components, such as <code>--background</code> or <code>--primary</code>. You can also add new colors as new variables. HSL colors are supported as well as hex and RGB, making it extremely handy to forge all the details to be exactly how you want them to be.</p><h1 id=a-little-demo>A little demo<a hidden class=anchor aria-hidden=true href=#a-little-demo>#</a></h1><p>In case you want to take a look, here&rsquo;s a simple form with a mode toggle button that I built in CodeSandbox:</p><iframe src="https://codesandbox.io/p/devbox/dark-mode-demo-tdkdkg?embed=1&file=%2Fsrc%2FApp.tsx" style=width:100%;height:800px;border:0;border-radius:4px;overflow:hidden title=dark-mode-demo allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe><hr><p><em>References</em></p><ul><li><a href="https://www.youtube.com/watch?v=sy-rRtT84CQ&amp;ab_channel=FullstackSimplified">React Dark Mode Toggle/Theme - Complete Guide</a></li><li><a href=https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/data-*>HTML custom data attributes</a></li><li><a href=https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_media_queries/Using_media_queries>Using media queries</a></li><li><a href=https://developer.chrome.com/docs/devtools/rendering>Rendering tab in Chrome</a></li><li><a href=https://tailwindcss.com/docs/dark-mode>Dark mode with TailwindCSS</a></li><li><a href=https://ui.shadcn.com/docs/theming>Theming with Shadcn/ui</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://iamgodot.com/tags/frontend/>Frontend</a></li></ul><nav class=paginav><a class=next href=https://iamgodot.com/posts/grandma/><span class=title>Next »</span><br><span>奶奶</span></a></nav></footer><script src=https://giscus.app/client.js data-repo=iamgodot/godot-blog-comments data-repo-id="MDEwOlJlcG9zaXRvcnkzOTk0Nzk0MTY=" data-category=Announcements data-category-id=DIC_kwDOF8-SeM4CO3OX data-mapping=pathname data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=dark_dimmed data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2020-2024 <a href=https://iamgodot.com/>Godot's Blog</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>