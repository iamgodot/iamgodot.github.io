<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>A Rational Upgrade for My Dotfiles | Godot's Blog</title>
<meta name=keywords content="git"><meta name=description content="Recently I&rsquo;ve refined my dotfiles which worked out pretty well, while what I&rsquo;d like to share is not the upgrade, but rather something behind it.
What I need
This is so cruicial yet so hard that you might realize you&rsquo;re diverting from it when working on the &ldquo;how&rdquo; part and have to start all over again. So seriouly, figure it out as much as you can in the first place."><meta name=author content><link rel=canonical href=https://blog.iamgodot.com/posts/a-rational-upgrade-for-my-dotfiles/><link crossorigin=anonymous href=/assets/css/stylesheet.997bd8a046a60f9d807eba93b8b3275223baa288ea970928dbb2581c808cf995.css integrity="sha256-mXvYoEamD52AfrqTuLMnUiO6oojqlwko27JYHICM+ZU=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.iamgodot.com/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.iamgodot.com/icons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.iamgodot.com/icons/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.iamgodot.com/icons/apple-touch-icon.png><link rel=mask-icon href=https://blog.iamgodot.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.iamgodot.com/posts/a-rational-upgrade-for-my-dotfiles/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@200..900&display=swap" rel=stylesheet><script defer src=https://us.umami.is/script.js data-website-id=9000d82d-f063-4632-aa6a-a33e85bf4234></script><meta property="og:url" content="https://blog.iamgodot.com/posts/a-rational-upgrade-for-my-dotfiles/"><meta property="og:site_name" content="Godot's Blog"><meta property="og:title" content="A Rational Upgrade for My Dotfiles"><meta property="og:description" content="Recently I’ve refined my dotfiles which worked out pretty well, while what I’d like to share is not the upgrade, but rather something behind it.
What I need This is so cruicial yet so hard that you might realize you’re diverting from it when working on the “how” part and have to start all over again. So seriouly, figure it out as much as you can in the first place."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-07-24T11:06:41-07:00"><meta property="article:modified_time" content="2024-07-24T11:06:41-07:00"><meta property="article:tag" content="Git"><meta name=twitter:card content="summary"><meta name=twitter:title content="A Rational Upgrade for My Dotfiles"><meta name=twitter:description content="Recently I&rsquo;ve refined my dotfiles which worked out pretty well, while what I&rsquo;d like to share is not the upgrade, but rather something behind it.
What I need
This is so cruicial yet so hard that you might realize you&rsquo;re diverting from it when working on the &ldquo;how&rdquo; part and have to start all over again. So seriouly, figure it out as much as you can in the first place."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.iamgodot.com/posts/"},{"@type":"ListItem","position":2,"name":"A Rational Upgrade for My Dotfiles","item":"https://blog.iamgodot.com/posts/a-rational-upgrade-for-my-dotfiles/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"A Rational Upgrade for My Dotfiles","name":"A Rational Upgrade for My Dotfiles","description":"Recently I\u0026rsquo;ve refined my dotfiles which worked out pretty well, while what I\u0026rsquo;d like to share is not the upgrade, but rather something behind it.\nWhat I need This is so cruicial yet so hard that you might realize you\u0026rsquo;re diverting from it when working on the \u0026ldquo;how\u0026rdquo; part and have to start all over again. So seriouly, figure it out as much as you can in the first place.\n","keywords":["git"],"articleBody":"Recently I’ve refined my dotfiles which worked out pretty well, while what I’d like to share is not the upgrade, but rather something behind it.\nWhat I need This is so cruicial yet so hard that you might realize you’re diverting from it when working on the “how” part and have to start all over again. So seriouly, figure it out as much as you can in the first place.\nFor my case, it’s rather simple:\nMaintain all the dotfiles. Bootstrap on new machines so they’ll feel like an old one. To be more specific, the bootstrap is about the developing environment such as Shell and Neovim other than some niche GUI settings especially on Mac. Moreover, the OSes I care about are pretty much just Arch and MacOS, which reduces a lot of the effort for me to adapt to other Linux distros or even WSL.\nNow I can easily imagine my use case in reality:\nOn a new machine, with one(or a few) command, every coding tool that makes me feel secure works. Every now and then I can cd into the dotfile folder to commit and push the changes. And this leads to the final satisfying refinement for me so far. However, I’ve got confused and deflected as well along the path.\nBump into Nix If you don’t know what Nix is, no worries, I’m not sure if I do either. What I can say is it’s a powerful package manager, and there’s even an OS called NixOS. But the problem with a powerful tool is you’ll likely end up with more chaos than efficiency.\nIt’s not like that I didn’t try. Just with the confusing documentation and all the functional programming concepts, the more time I spent, the more overwhelmed and lost I got. In the end I nearly forgot what I need initially and decided to give up. I also read a comment on Reddit that this guy has used NixOS for years yet still got no idea how it works, which is funny yet a little sad too.\nI’m not against powerful or complex tools but the lesson I learned is we all should assess their documentations before adopting. User manuals really are getting underestimated by not only users, but also developers.\nA more important factor for me to give up than its difficulty is the overkill. It took me a while to realize Nix is not a good match for my simple needs, which is exactly a case of YAGNI:\nYou aren’t gonna need it.\nKeep it simple After Nix I found I can just use shell scripts and a Makefile to achieve the bootstrapping, and turns out it’s not as stupid as I thought. Essentially it’s like this:\nOn a new machine I clone the repo locally. There’s a simple command from Makefile for bootstrapping. Install a list of packages. Create symlinks of dotfiles. Configure everything else. There’re also atomic commands for installing or symlinking. The whole thing was quick and smooth after I started to follow this approach. And it also helps me sort out every process in a very organized way.\nIt never ends This upgrade won’t be the last as my needs are inevitably evolving, thus I’ll keep learning and exploring.\nBesides symlinking, there’s also a classic approach taking advantage of a bare Git repo, which is a repo containing only the Git stuff in the .git folder from a normal Git repo. The reason to use it is we don’t need additonal copies of our dotfiles since they should reside in different folders of home directory. Since a bare Git repo doesn’t have a work tree, we can load the entire home directory for it. Then by creating an alias of a special Git command, we are able to manage scattered dotfiles in this bare repo. You can probably peek through this smart method via the following commands:\ngit init --bare ~/.dotfiles alias dotfiles='/usr/bin/git --git-dir=\"$HOME/.dotfiles/\" --work-tree=\"$HOME\"' dotfiles config status.showUntrackedFiles no Nonetheless, neither this approach or my current one should suffice for some normal features nowadays, to illustrate:\nSecret management Testing and debugging File encryption Therefore, I’m actively gathering my potential needs and exploring new dotfile tools. For now I think chezmoi looks pretty promising.\nIn a nutshell, the key to satisfaction is match your true needs with a proper approach. Let the tools serve the purpose rather than the other way around.\nReferences My dotfiles Dotfiles - ArchWiki What is a bare Git repo and why you need them ","wordCount":"751","inLanguage":"en","datePublished":"2024-07-24T11:06:41-07:00","dateModified":"2024-07-24T11:06:41-07:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.iamgodot.com/posts/a-rational-upgrade-for-my-dotfiles/"},"publisher":{"@type":"Organization","name":"Godot's Blog","logo":{"@type":"ImageObject","url":"https://blog.iamgodot.com/icons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.iamgodot.com/ accesskey=h title="Godot's Blog (Alt + H)">Godot's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">A Rational Upgrade for My Dotfiles</h1><div class=post-meta><span title='2024-07-24 11:06:41 -0700 -0700'>07-24</span>&nbsp;·&nbsp;4 min</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#what-i-need aria-label="What I need">What I need</a></li><li><a href=#bump-into-nix aria-label="Bump into Nix">Bump into Nix</a></li><li><a href=#keep-it-simple aria-label="Keep it simple">Keep it simple</a></li><li><a href=#it-never-ends aria-label="It never ends">It never ends</a><ul><ul><li><a href=#references aria-label=References>References</a></li></ul></ul></li></ul></div></details></div><div class=post-content><p>Recently I&rsquo;ve refined my dotfiles which worked out pretty well, while what I&rsquo;d like to share is not the upgrade, but rather something behind it.</p><h1 id=what-i-need>What I need<a hidden class=anchor aria-hidden=true href=#what-i-need>#</a></h1><p>This is so cruicial yet so hard that you might realize you&rsquo;re diverting from it when working on the &ldquo;how&rdquo; part and have to start all over again. So seriouly, figure it out as much as you can in the first place.</p><p>For my case, it&rsquo;s rather simple:</p><ol><li>Maintain all the dotfiles.</li><li>Bootstrap on new machines so they&rsquo;ll feel like an old one.</li></ol><p>To be more specific, the bootstrap is about the developing environment such as Shell and Neovim other than some niche GUI settings especially on Mac. Moreover, the OSes I care about are pretty much just Arch and MacOS, which reduces a lot of the effort for me to adapt to other Linux distros or even WSL.</p><p>Now I can easily imagine my use case in reality:</p><ul><li>On a new machine, with one(or a few) command, every coding tool that makes me feel secure works.</li><li>Every now and then I can cd into the dotfile folder to commit and push the changes.</li></ul><p>And this leads to the final satisfying refinement for me so far. However, I&rsquo;ve got confused and deflected as well along the path.</p><h1 id=bump-into-nix>Bump into Nix<a hidden class=anchor aria-hidden=true href=#bump-into-nix>#</a></h1><p>If you don&rsquo;t know what Nix is, no worries, I&rsquo;m not sure if I do either. What I can say is it&rsquo;s a powerful package manager, and there&rsquo;s even an OS called NixOS. But the problem with a powerful tool is you&rsquo;ll likely end up with more chaos than efficiency.</p><p>It&rsquo;s not like that I didn&rsquo;t try. Just with the confusing documentation and all the functional programming concepts, the more time I spent, the more overwhelmed and lost I got. In the end I nearly forgot what I need initially and decided to give up. I also read a comment on Reddit that this guy has used NixOS for years yet still got no idea how it works, which is funny yet a little sad too.</p><p>I&rsquo;m not against powerful or complex tools but the lesson I learned is we all should assess their documentations before adopting. User manuals really are getting underestimated by not only users, but also developers.</p><p>A more important factor for me to give up than its difficulty is the overkill. It took me a while to realize Nix is not a good match for my simple needs, which is exactly a case of <a href=https://en.wikipedia.org/wiki/You_aren%27t_gonna_need_it>YAGNI</a>:</p><blockquote><p>You aren&rsquo;t gonna need it.</p></blockquote><h1 id=keep-it-simple>Keep it simple<a hidden class=anchor aria-hidden=true href=#keep-it-simple>#</a></h1><p>After Nix I found I can just use shell scripts and a Makefile to achieve the bootstrapping, and turns out it&rsquo;s not as stupid as I thought. Essentially it&rsquo;s like this:</p><ul><li>On a new machine I clone the repo locally.</li><li>There&rsquo;s a simple command from Makefile for bootstrapping.<ul><li>Install a list of packages.</li><li>Create symlinks of dotfiles.</li><li>Configure everything else.</li></ul></li><li>There&rsquo;re also atomic commands for installing or symlinking.</li></ul><p>The whole thing was quick and smooth after I started to follow this approach. And it also helps me sort out every process in a very organized way.</p><h1 id=it-never-ends>It never ends<a hidden class=anchor aria-hidden=true href=#it-never-ends>#</a></h1><p>This upgrade won&rsquo;t be the last as my needs are inevitably evolving, thus I&rsquo;ll keep learning and exploring.</p><p>Besides symlinking, there&rsquo;s also a classic approach taking advantage of a bare Git repo, which is a repo containing only the Git stuff in the <code>.git</code> folder from a normal Git repo. The reason to use it is we don&rsquo;t need additonal copies of our dotfiles since they should reside in different folders of home directory. Since a bare Git repo doesn&rsquo;t have a work tree, we can load the entire home directory for it. Then by creating an alias of a special Git command, we are able to manage scattered dotfiles in this bare repo. You can probably peek through this smart method via the following commands:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git init --bare ~/.dotfiles
</span></span><span style=display:flex><span>alias dotfiles<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;/usr/bin/git --git-dir=&#34;$HOME/.dotfiles/&#34; --work-tree=&#34;$HOME&#34;&#39;</span>
</span></span><span style=display:flex><span>dotfiles config status.showUntrackedFiles no
</span></span></code></pre></div><p>Nonetheless, neither this approach or my current one should suffice for some normal features nowadays, to illustrate:</p><ol><li>Secret management</li><li>Testing and debugging</li><li>File encryption</li></ol><p>Therefore, I&rsquo;m actively gathering my potential needs and exploring new dotfile tools. For now I think <a href=https://www.chezmoi.io/>chezmoi</a> looks pretty promising.</p><p>In a nutshell, the key to satisfaction is match your true needs with a proper approach. Let the tools serve the purpose rather than the other way around.</p><hr><h3 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h3><ul><li><a href=https://github.com/iamgodot/dotfiles>My dotfiles</a></li><li><a href=https://wiki.archlinux.org/title/Dotfiles>Dotfiles - ArchWiki</a></li><li><a href="https://www.youtube.com/watch?v=8aZW9mYOxhc&amp;ab_channel=EngineerMan">What is a bare Git repo and why you need them</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.iamgodot.com/tags/git/>Git</a></li></ul><nav class=paginav><a class=prev href=https://blog.iamgodot.com/posts/the-ordinary-world/><span class=title>« Prev</span><br><span>读《平凡的世界》</span>
</a><a class=next href=https://blog.iamgodot.com/posts/zsh-history-setting/><span class=title>Next »</span><br><span>History Setting in Zsh</span></a></nav></footer><script src=https://giscus.app/client.js data-repo=iamgodot/godot-blog-comments data-repo-id="MDEwOlJlcG9zaXRvcnkzOTk0Nzk0MTY=" data-category=Announcements data-category-id=DIC_kwDOF8-SeM4CO3OX data-mapping=pathname data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=dark_dimmed data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2020-2025 <a href=https://blog.iamgodot.com/>Godot's Blog</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>